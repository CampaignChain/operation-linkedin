{#
This file is part of the CampaignChain package.

(c) Sandro Groganz <sandro@campaignchain.com>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.
#}

{% extends 'CampaignChainCoreBundle:Operation:read.html.twig' %}

{% block operation %}
    {% stylesheets '@campaignchain_operation_linkedin_css' %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
    {% endstylesheets %}

    <div class="btn-toolbar" role="toolbar">
        <div class="btn-group" role="group" aria-label="...">
            <a href="{{ news_item.getUrl() }}" target="_blank" class="btn btn-default"><i class="fa fa-external-link"></i> View on Linkedin</a>
        </div>
    </div>
    <div id="campaignchain-operation-linkedin-share-news-item">
        <div class="panel panel-default">
            <div class="panel-heading"><i class="fa fa-linkedin-square"></i></div>
            <div class="panel-body">
            {% if is_live %}
                {% set message = news_item.getLinkedinData().updateContent.person.currentShare %}
                {% set location = activity.getLocation() %}
                {% set link_parts = message.content.submittedUrl|campaignchain_parse_url %}
                <div class="post">
                    <a href="{{ location.getUrl() }}"><img src="{{ location.getImage() }}" class="location-image" width="65" height="65"></a>
                    <div class="body">
                        <div class="location-name"><a href="{{ location.getUrl() }}">{{ location.getName() }}</a></div>
                        <div class="news-item-message">{{ message.comment }}</div>
                        <div class="news-item-link-title"><a href="{{ message.content.submittedUrl }}">{{ message.content.title }}</a></div>
                        <div class="link">
                            <a href="{{ message.content.submittedUrl }}" class="host">{{ link_parts.host|campaignchain_ltrim('www.') }}</a>
                            <span class="description">{{ message.content.description }}</span>
                        </div>
                    </div>
                </div>
                {% else %}
                    <div class="alert alert-danger" role="alert">
                        <p>This news item has not been created by Linkedin yet. Please wait a couple of seconds.</p>
                        <p><a href="{{ app.request.uri }}" class="btn btn-primary" role="button"><i class="fa fa-refresh"></i> Retry</a></p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="btn-toolbar" role="toolbar">
        <div class="btn-group" role="group" aria-label="...">
            <a href="{{ news_item.getUrl() }}" target="_blank" class="btn btn-default"><i class="fa fa-external-link"></i> View on Linkedin</a>
        </div>
    </div>
{% endblock %}